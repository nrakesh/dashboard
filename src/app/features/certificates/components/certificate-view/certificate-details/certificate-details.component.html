<div *ngIf="certificate" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
  <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
    <div class="flex items-center justify-between p-6 border-b border-gray-200">
      <div class="flex items-center space-x-3">
        <svg [ngClass]="certificate.isActive ? 'text-green-500' : 'text-red-500'" class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
        <h2 class="text-xl font-semibold text-gray-900">Certificate Details</h2>
      </div>
      <button
        (click)="onClose.emit()"
        class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
      >
        <svg class="h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
    </div>

    <div class="p-6 space-y-6">
      <div class="flex items-center space-x-4">
        <span [ngClass]="certificate.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
              class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium">
          {{ certificate.isActive ? 'Active' : 'Inactive' }}
        </span>
        <span *ngIf="certificate.isActive && isExpiringSoon(certificate.notAfter)"
              class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
          Expiring Soon
        </span>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-4">
          <div>
            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
              <svg class="h-4 w-4 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
              Common Name
            </label>
            <p class="text-gray-900 font-medium">{{ certificate.commonName }}</p>
          </div>

          <div>
            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
              <svg class="h-4 w-4 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
              Issuer
            </label>
            <p class="text-gray-900">{{ certificate.issuer }}</p>
          </div>

          <div>
            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
              <svg class="h-4 w-4 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line></svg>
              Serial Number
            </label>
            <p class="text-gray-900 font-mono text-sm break-all">{{ certificate.serialNumber }}</p>
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
              <svg class="h-4 w-4 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
              Valid From
            </label>
            <p class="text-gray-900">{{ certificate.notBefore | date: 'medium' }}</p>
          </div>

          <div>
            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
              <svg class="h-4 w-4 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
              Valid Until
            </label>
            <p [ngClass]="isExpiringSoon(certificate.notAfter) ? 'text-yellow-600' : 'text-gray-900'"
               class="font-medium">
              {{ certificate.notAfter | date: 'medium' }}
            </p>
          </div>

          <div>
            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
              <svg class="h-4 w-4 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
              Algorithm
            </label>
            <p class="text-gray-900">{{ certificate.algorithm }}</p>
          </div>
        </div>
      </div>

      <div class="border-t border-gray-200 pt-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Technical Details</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm font-medium text-gray-700">Key Size</label>
            <p class="text-gray-900 mt-1">{{ certificate.keySize }} bits</p>
          </div>
          <div>
            <label class="text-sm font-medium text-gray-700">Version</label>
            <p class="text-gray-900 mt-1">v{{ certificate.version }}</p>
          </div>
          <div>
            <label class="text-sm font-medium text-gray-700">Status</label>
            <p class="text-gray-900 mt-1">{{ certificate.isActive ? 'Active' : 'Inactive' }}</p>
          </div>
        </div>
      </div>

      <div class="border-t border-gray-200 pt-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Browser Support</h3>
        <div class="flex items-center space-x-4 text-gray-500">
          <div *ngIf="certificate.is_google_chrome" class="flex flex-col items-center" title="Supported by Google Chrome">
            <svg class="h-8 w-8" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Google Chrome</title><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#4285F4"/></svg>
            <span class="text-xs mt-1">Chrome</span>
          </div>
          <div *ngIf="certificate.is_mozilla" class="flex flex-col items-center" title="Supported by Mozilla Firefox">
            <svg class="h-8 w-8" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Mozilla Firefox</title><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z" fill="#FF7139"/></svg>
            <span class="text-xs mt-1">Firefox</span>
          </div>
          <div *ngIf="certificate.is_microsoft" class="flex flex-col items-center" title="Supported by Microsoft">
            <svg class="h-8 w-8" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Microsoft Edge</title><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z" fill="#0078D7"/></svg>
            <span class="text-xs mt-1">Microsoft</span>
          </div>
          <div *ngIf="certificate.is_apple" class="flex flex-col items-center" title="Supported by Apple">
            <svg class="h-8 w-8" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Apple</title><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z" fill="#A2AAAD"/></svg>
            <span class="text-xs mt-1">Apple</span>
          </div>
          <div *ngIf="!certificate.is_google_chrome && !certificate.is_mozilla && !certificate.is_microsoft && !certificate.is_apple">
            <p class="text-sm text-gray-600">No specific browser support information available.</p>
          </div>
        </div>
      </div>

      <div class="border-t border-gray-200 pt-6">
        <label class="text-sm font-medium text-gray-700 mb-2 block">Fingerprint (SHA-256)</label>
        <div class="bg-gray-50 p-3 rounded-lg">
          <p class="text-gray-900 font-mono text-sm break-all">{{ certificate.fingerprint }}</p>
        </div>
      </div>
    </div>

    <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl">
      <button
        (click)="closeComponent()"
        class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"
      >
        Close
      </button>
    </div>
  </div>
</div>
